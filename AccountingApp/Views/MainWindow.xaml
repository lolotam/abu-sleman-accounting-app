<Window x:Class="AccountingApp.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:AccountingApp.Views"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        mc:Ignorable="d"
        Title="Abu Sleman Accounting System" 
        Height="768" Width="1366"
        WindowStartupLocation="CenterScreen"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        Background="{DynamicResource MaterialDesignPaper}"
        TextElement.FontWeight="Medium"
        TextElement.FontSize="14"
        FontFamily="{materialDesign:MaterialDesignFont}">
    
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="250" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        
        <!-- Left Sidebar -->
        <Grid Grid.Column="0" Background="{DynamicResource PrimaryHueDarkBrush}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            
            <!-- App Logo and Title -->
            <StackPanel Grid.Row="0" Margin="16,24,16,24">
                <Image Source="/Resources/logo.png" Width="60" Height="60" HorizontalAlignment="Left" />
                <TextBlock Text="Abu Sleman" 
                           Foreground="White" 
                           FontSize="22" 
                           FontWeight="Bold" 
                           Margin="0,8,0,0"/>
                <TextBlock Text="Accounting System" 
                           Foreground="White" 
                           Opacity="0.8" 
                           FontSize="14" 
                           Margin="0,0,0,0"/>
            </StackPanel>
            
            <!-- Navigation Menu -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="8,0">
                    <!-- Dashboard -->
                    <Button Style="{StaticResource MaterialDesignFlatButton}"
                            Command="{Binding DashboardCommand}"
                            HorizontalContentAlignment="Left"
                            Foreground="White"
                            Margin="0,4">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="ViewDashboard" 
                                                     VerticalAlignment="Center" 
                                                     Margin="0,0,8,0" />
                            <TextBlock Text="Dashboard" />
                        </StackPanel>
                    </Button>
                    
                    <!-- Products -->
                    <Button Style="{StaticResource MaterialDesignFlatButton}"
                            Command="{Binding ProductsCommand}"
                            HorizontalContentAlignment="Left"
                            Foreground="White"
                            Margin="0,4">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="Package" 
                                                     VerticalAlignment="Center" 
                                                     Margin="0,0,8,0" />
                            <TextBlock Text="Products" />
                        </StackPanel>
                    </Button>
                    
                    <!-- Customers -->
                    <Button Style="{StaticResource MaterialDesignFlatButton}"
                            Command="{Binding CustomersCommand}"
                            HorizontalContentAlignment="Left"
                            Foreground="White"
                            Margin="0,4">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="AccountMultiple" 
                                                     VerticalAlignment="Center" 
                                                     Margin="0,0,8,0" />
                            <TextBlock Text="Customers" />
                        </StackPanel>
                    </Button>
                    
                    <!-- Suppliers -->
                    <Button Style="{StaticResource MaterialDesignFlatButton}"
                            Command="{Binding SuppliersCommand}"
                            HorizontalContentAlignment="Left"
                            Foreground="White"
                            Margin="0,4">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="TruckDelivery" 
                                                     VerticalAlignment="Center" 
                                                     Margin="0,0,8,0" />
                            <TextBlock Text="Suppliers" />
                        </StackPanel>
                    </Button>
                    
                    <!-- Sales -->
                    <Button Style="{StaticResource MaterialDesignFlatButton}"
                            Command="{Binding SalesCommand}"
                            HorizontalContentAlignment="Left"
                            Foreground="White"
                            Margin="0,4">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="CartOutline" 
                                                     VerticalAlignment="Center" 
                                                     Margin="0,0,8,0" />
                            <TextBlock Text="Sales" />
                        </StackPanel>
                    </Button>
                    
                    <!-- Purchases -->
                    <Button Style="{StaticResource MaterialDesignFlatButton}"
                            Command="{Binding PurchasesCommand}"
                            HorizontalContentAlignment="Left"
                            Foreground="White"
                            Margin="0,4">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="ShoppingOutline" 
                                                     VerticalAlignment="Center" 
                                                     Margin="0,0,8,0" />
                            <TextBlock Text="Purchases" />
                        </StackPanel>
                    </Button>
                    
                    <!-- Accounting -->
                    <Button Style="{StaticResource MaterialDesignFlatButton}"
                            Command="{Binding AccountingCommand}"
                            HorizontalContentAlignment="Left"
                            Foreground="White"
                            Margin="0,4">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="Calculator" 
                                                     VerticalAlignment="Center" 
                                                     Margin="0,0,8,0" />
                            <TextBlock Text="Accounting" />
                        </StackPanel>
                    </Button>
                    
                    <!-- Reports -->
                    <Button Style="{StaticResource MaterialDesignFlatButton}"
                            Command="{Binding ReportsCommand}"
                            HorizontalContentAlignment="Left"
                            Foreground="White"
                            Margin="0,4">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="ChartBar" 
                                                     VerticalAlignment="Center" 
                                                     Margin="0,0,8,0" />
                            <TextBlock Text="Reports" />
                        </StackPanel>
                    </Button>
                    
                    <!-- Settings -->
                    <Button Style="{StaticResource MaterialDesignFlatButton}"
                            Command="{Binding SettingsCommand}"
                            HorizontalContentAlignment="Left"
                            Foreground="White"
                            Margin="0,4">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Kind="Cog" 
                                                     VerticalAlignment="Center" 
                                                     Margin="0,0,8,0" />
                            <TextBlock Text="Settings" />
                        </StackPanel>
                    </Button>
                </StackPanel>
            </ScrollViewer>
            
            <!-- User Info and Logout -->
            <Grid Grid.Row="2" Margin="16,16,16,24">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                
                <Border Grid.Column="0" 
                        Width="40" 
                        Height="40" 
                        CornerRadius="20" 
                        Background="{DynamicResource PrimaryHueLightBrush}">
                    <TextBlock Text="{Binding CurrentUser.FullName, Converter={StaticResource InitialsConverter}}" 
                               VerticalAlignment="Center" 
                               HorizontalAlignment="Center" 
                               Foreground="White" 
                               FontWeight="Bold" />
                </Border>
                
                <StackPanel Grid.Column="1" Margin="12,0,0,0">
                    <TextBlock Text="{Binding CurrentUser.FullName}" 
                               Foreground="White" 
                               FontWeight="SemiBold" />
                    <TextBlock Text="{Binding CurrentUser.Role}" 
                               Foreground="White" 
                               Opacity="0.7" 
                               FontSize="12" />
                </StackPanel>
                
                <Button Grid.Column="2" 
                        Style="{StaticResource MaterialDesignIconButton}" 
                        Command="{Binding LogoutCommand}"
                        ToolTip="Logout">
                    <materialDesign:PackIcon Kind="Logout" Foreground="White" />
                </Button>
            </Grid>
        </Grid>
        
        <!-- Main Content Area -->
        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            
            <!-- Page Header -->
            <Grid Grid.Row="0" Margin="24,16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="0" 
                           Text="{Binding PageTitle}" 
                           Style="{StaticResource PageTitle}" 
                           VerticalAlignment="Center" />
                
                <StackPanel Grid.Column="1" 
                            Orientation="Horizontal">
                    <Button Style="{StaticResource MaterialDesignIconButton}" 
                            ToolTip="Notifications">
                        <materialDesign:PackIcon Kind="BellOutline" />
                    </Button>
                    <Button Style="{StaticResource MaterialDesignIconButton}" 
                            ToolTip="Help">
                        <materialDesign:PackIcon Kind="HelpCircleOutline" />
                    </Button>
                </StackPanel>
            </Grid>
            
            <!-- Page Content -->
            <Border Grid.Row="1" 
                    Margin="24,0,24,24" 
                    Background="White" 
                    CornerRadius="8" 
                    Effect="{StaticResource MaterialDesignElevationShadow2}">
                <ContentControl Content="{Binding CurrentView}" />
            </Border>
        </Grid>
    </Grid>
    
    <Window.Resources>
        <DropShadowEffect x:Key="MaterialDesignElevationShadow2" 
                          BlurRadius="8" 
                          ShadowDepth="1" 
                          Direction="270" 
                          Color="#22000000" />
        <local:InitialsConverter x:Key="InitialsConverter" />
    </Window.Resources>
</Window>
